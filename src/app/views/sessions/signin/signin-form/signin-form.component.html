<form [formGroup]="form" (submit)="onSubmit()">
  <ng-container
    *ngIf="!hasTwoFactor"
  >
    <ix-input
      #usernameField
      ixAutofocus
      formControlName="username"
      prefixIcon="person"
      autocomplete="username"
      class="username-input"
      [label]="'Username' | translate"
      [required]="true"
      (keyup.enter)="!loginBtn.disabled && onSubmit()"
    ></ix-input>

    <ix-input
      #passwordField
      formControlName="password"
      type="password"
      prefixIcon="lock"
      autocomplete="current-password"
      [label]="'Password' | translate"
      [required]="true"
      (keyup.enter)="!loginBtn.disabled && onSubmit()"
    ></ix-input>
    <button
      #loginBtn
      class="submit-button"
      mat-button
      type="button"
      color="primary"
      ixTest="log-in"
      [disabled]="!(shouldEnableLoginBtn$ | async)"
      (click)="onSubmit()"
    >
      {{ 'Log In' | translate }}
    </button>
  </ng-container>
  <ng-container
    *ngIf="hasTwoFactor"
  >
    <ix-input
      #otpField
      formControlName="otp"
      prefixIcon="phonelink"
      autocomplete="one-time-code"
      [label]="'Two-Factor Authentication Code' | translate"
      [required]="true"
      (keyup.enter)="!loginWithOtpBtn.disabled && loginWithOtp()"
    ></ix-input>
    <button
      #loginWithOtpBtn
      class="submit-button"
      mat-button
      type="button"
      color="primary"
      ixTest="log-in"
      [disabled]="!(shouldEnableLoginWithOtpBtn$ | async)"
      (click)="loginWithOtp()"
    >
      {{ 'Proceed' | translate }}
    </button>
    <button
      class="submit-button"
      mat-button
      type="button"
      ixTest="otp-log-in"
      [disabled]="isLoading"
      (click)="cancelOtpLogin()"
    >{{ 'Cancel' | translate }}</button>
    
  </ng-container>
</form>
